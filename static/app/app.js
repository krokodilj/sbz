(function(){
   angular.module('buystuff',['ngRoute','ngCookies','ngStorage'])
   		.config(function($routeProvider){
   				$routeProvider
   					.when("/",{
                     redirectTo:"/buy"
   					})
   					.when("/login",{
   						templateUrl:"app/views/login.html",
   						controller:"loginController",
   						controllerAs:"ctrl",
   						resolve:{
   							"permission":function(permissionService){
   								permissionService.givePermission(['guest']);
   							}
   						}
   					})
   					.when("/register",{
   						templateUrl:"app/views/register.html",
   						controller:"registerController",
   						controllerAs:"ctrl",
   						resolve:{
   							"permission":function(permissionService){
   								permissionService.givePermission(['guest']);
   							}
   						}
   					})
   					.when("/profile/:username",{
   						templateUrl:"app/views/profile.html",
   						controller:"profileController",
   						controllerAs:"ctrl",
   						resolve:{
   							"permission":function(permissionService){
   								permissionService.givePermission(["customer","manager","salesman"])
   							}
   						}
   					})
                  .when("/user_category",{
                     templateUrl:"app/views/user_category.html",
                     controller:"userCategoryController",
                     controllerAs:"ctrl",
                     resolve:{
                        "permission":function(permissionService){
                           permissionService.givePermission(["manager"]);
                        }
                     }
                  })
                  .when("/article_category",{
                     templateUrl:"app/views/article_category.html",
                     controller:"articleCategoryController",
                     controllerAs:"ctrl",
                     resolve:{
                        "permission":function(permissionService){
                           permissionService.givePermission(["manager"]);
                        }
                     }
                  })
                  .when("/sale_event",{
                     templateUrl:"app/views/sale_event.html",
                     controller:"saleEventController",
                     controllerAs:"ctrl",
                     resolve:{
                        "permission":function(permissionService){
                           permissionService.givePermission(["manager"]);
                        }
                     }
                  })
                  .when("/buy",{
                     templateUrl:"app/views/all_articles.html",
                     controller:"allArticlesController",
                     controllerAs:"ctrl"
                  })
                  .when("/cart",{
                     templateUrl:"app/views/cart.html",
                     controller:"cartController",
                     controllerAs:"ctrl",
                     resolve:{
                        "permission":function(permissionService){
                           permissionService.givePermission(["customer","guest"]);
                        }
                     }
                  })
                  .when("/orders",{
                     templateUrl:"app/views/orders.html",
                     controller:"orderController",
                     controllerAs:"ctrl",
                     resolve:{
                        "permission":function(permissionService){
                           permissionService.givePermission(["salesman"]);
                        }
                     }
                  })
   					.otherwise({
   						redirectTo:"/"
   					})
   			})

})();